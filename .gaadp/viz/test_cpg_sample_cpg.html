<!DOCTYPE html>
<html>
<head>
    <title>GAADP Knowledge Graph</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        #graph { width: 100vw; height: 100vh; }
        .node { cursor: pointer; }
        .node text { font-size: 10px; }
        .link { stroke-opacity: 0.6; }
        .tooltip {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 4px;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div id="graph"></div>
    <script>
        const data = {"nodes": [{"id": "code_7925198775797671324", "type": "CODE", "status": "PENDING", "content_preview": "import unittest\n\nclass Animal:\n    def __init__(self, name):\n        self.name = name\n    \n    def m", "color": "#96CEB4", "metadata": {"file_path": "core/test_cpg_sample.py", "language": "python", "imports": ["unittest"], "classes": ["Animal", "Mammal", "Dog", "TestAnimalInheritance"], "functions": ["__init__", "make_sound", "groom", "fetch", "test_base_animal", "test_mammal_inheritance", "test_dog_inheritance"]}}, {"id": "phantom_import_unittest", "type": "CODE", "status": "COMPLETE", "content_preview": "unittest", "color": "#96CEB4", "metadata": {}}, {"id": "class_Animal", "type": "CLASS", "status": "COMPLETE", "content_preview": "class Animal:\n    def __init__(self, name):\n        self.name = name\n    \n    def make_sound(self):\n", "color": "#9B59B6", "metadata": {"name": "Animal", "lineno": 3, "col_offset": 0, "bases": [], "content": "class Animal:\n    def __init__(self, name):\n        self.name = name\n    \n    def make_sound(self):\n        return \"Generic animal sound\""}}, {"id": "class_Mammal", "type": "CLASS", "status": "COMPLETE", "content_preview": "class Mammal(Animal):\n    def __init__(self, name, fur_color):\n        super().__init__(name)\n      ", "color": "#9B59B6", "metadata": {"name": "Mammal", "lineno": 10, "col_offset": 0, "bases": ["Animal"], "content": "class Mammal(Animal):\n    def __init__(self, name, fur_color):\n        super().__init__(name)\n        self.fur_color = fur_color\n    \n    def make_sound(self):\n        return f\"{self.name} makes a mammalian sound\"\n    \n    def groom(self):\n        return f\"Grooming {self.name}'s {self.fur_color} fur\""}}, {"id": "class_Dog", "type": "CLASS", "status": "COMPLETE", "content_preview": "class Dog(Mammal):\n    def __init__(self, name, fur_color, breed):\n        super().__init__(name, fu", "color": "#9B59B6", "metadata": {"name": "Dog", "lineno": 21, "col_offset": 0, "bases": ["Mammal"], "content": "class Dog(Mammal):\n    def __init__(self, name, fur_color, breed):\n        super().__init__(name, fur_color)\n        self.breed = breed\n    \n    def make_sound(self):\n        return \"Woof!\"\n    \n    def fetch(self):\n        return f\"{self.name} the {self.breed} is fetching\""}}, {"id": "class_TestAnimalInheritance", "type": "CLASS", "status": "COMPLETE", "content_preview": "class TestAnimalInheritance(unittest.TestCase):\n    def test_base_animal(self):\n        animal = Ani", "color": "#9B59B6", "metadata": {"name": "TestAnimalInheritance", "lineno": 32, "col_offset": 0, "bases": [], "content": "class TestAnimalInheritance(unittest.TestCase):\n    def test_base_animal(self):\n        animal = Animal(\"Generic\")\n        self.assertEqual(animal.name, \"Generic\")\n        self.assertEqual(animal.make_sound(), \"Generic animal sound\")\n    \n    def test_mammal_inheritance(self):\n        mammal = Mammal(\"Lion\", \"golden\")\n        self.assertEqual(mammal.name, \"Lion\")\n        self.assertEqual(mammal.fur_color, \"golden\")\n        self.assertEqual(mammal.make_sound(), \"Lion makes a mammalian sound\")\n        self.assertEqual(mammal.groom(), \"Grooming Lion's golden fur\")\n    \n    def test_dog_inheritance(self):\n        dog = Dog(\"Buddy\", \"brown\", \"Labrador\")\n        self.assertEqual(dog.name, \"Buddy\")\n        self.assertEqual(dog.fur_color, \"brown\")\n        self.assertEqual(dog.breed, \"Labrador\")\n        self.assertEqual(dog.make_sound(), \"Woof!\")\n        self.assertEqual(dog.groom(), \"Grooming Buddy's brown fur\")\n        self.assertEqual(dog.fetch(), \"Buddy the Labrador is fetching\")"}}, {"id": "function___init__", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def __init__(self, name, fur_color, breed):\n        super().__init__(name, fur_color)\n        self.b", "color": "#3498DB", "metadata": {"name": "__init__", "lineno": 22, "col_offset": 4, "is_async": false, "args": ["self", "name", "fur_color", "breed"], "content": "def __init__(self, name, fur_color, breed):\n        super().__init__(name, fur_color)\n        self.breed = breed"}}, {"id": "function_make_sound", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def make_sound(self):\n        return \"Woof!\"", "color": "#3498DB", "metadata": {"name": "make_sound", "lineno": 26, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def make_sound(self):\n        return \"Woof!\""}}, {"id": "function_groom", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def groom(self):\n        return f\"Grooming {self.name}'s {self.fur_color} fur\"", "color": "#3498DB", "metadata": {"name": "groom", "lineno": 18, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def groom(self):\n        return f\"Grooming {self.name}'s {self.fur_color} fur\""}}, {"id": "function_fetch", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def fetch(self):\n        return f\"{self.name} the {self.breed} is fetching\"", "color": "#3498DB", "metadata": {"name": "fetch", "lineno": 29, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def fetch(self):\n        return f\"{self.name} the {self.breed} is fetching\""}}, {"id": "function_test_base_animal", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def test_base_animal(self):\n        animal = Animal(\"Generic\")\n        self.assertEqual(animal.name,", "color": "#3498DB", "metadata": {"name": "test_base_animal", "lineno": 33, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def test_base_animal(self):\n        animal = Animal(\"Generic\")\n        self.assertEqual(animal.name, \"Generic\")\n        self.assertEqual(animal.make_sound(), \"Generic animal sound\")"}}, {"id": "function_test_mammal_inheritance", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def test_mammal_inheritance(self):\n        mammal = Mammal(\"Lion\", \"golden\")\n        self.assertEqua", "color": "#3498DB", "metadata": {"name": "test_mammal_inheritance", "lineno": 38, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def test_mammal_inheritance(self):\n        mammal = Mammal(\"Lion\", \"golden\")\n        self.assertEqual(mammal.name, \"Lion\")\n        self.assertEqual(mammal.fur_color, \"golden\")\n        self.assertEqual(mammal.make_sound(), \"Lion makes a mammalian sound\")\n        self.assertEqual(mammal.groom(), \"Grooming Lion's golden fur\")"}}, {"id": "function_test_dog_inheritance", "type": "FUNCTION", "status": "COMPLETE", "content_preview": "def test_dog_inheritance(self):\n        dog = Dog(\"Buddy\", \"brown\", \"Labrador\")\n        self.assertE", "color": "#3498DB", "metadata": {"name": "test_dog_inheritance", "lineno": 45, "col_offset": 4, "is_async": false, "args": ["self"], "content": "def test_dog_inheritance(self):\n        dog = Dog(\"Buddy\", \"brown\", \"Labrador\")\n        self.assertEqual(dog.name, \"Buddy\")\n        self.assertEqual(dog.fur_color, \"brown\")\n        self.assertEqual(dog.breed, \"Labrador\")\n        self.assertEqual(dog.make_sound(), \"Woof!\")\n        self.assertEqual(dog.groom(), \"Grooming Buddy's brown fur\")\n        self.assertEqual(dog.fetch(), \"Buddy the Labrador is fetching\")"}}, {"id": "call_main", "type": "CALL", "status": "COMPLETE", "content_preview": "main", "color": "#E67E22", "metadata": {"lineno": 55, "col_offset": 4, "args_count": 0}}, {"id": "call___init__", "type": "CALL", "status": "COMPLETE", "content_preview": "__init__", "color": "#E67E22", "metadata": {"lineno": 23, "col_offset": 8, "args_count": 2}}, {"id": "call_Animal", "type": "CALL", "status": "COMPLETE", "content_preview": "Animal", "color": "#E67E22", "metadata": {"lineno": 34, "col_offset": 17, "args_count": 1}}, {"id": "call_assertEqual", "type": "CALL", "status": "COMPLETE", "content_preview": "assertEqual", "color": "#E67E22", "metadata": {"lineno": 52, "col_offset": 8, "args_count": 2}}, {"id": "call_Mammal", "type": "CALL", "status": "COMPLETE", "content_preview": "Mammal", "color": "#E67E22", "metadata": {"lineno": 39, "col_offset": 17, "args_count": 2}}, {"id": "call_Dog", "type": "CALL", "status": "COMPLETE", "content_preview": "Dog", "color": "#E67E22", "metadata": {"lineno": 46, "col_offset": 14, "args_count": 3}}, {"id": "call_make_sound", "type": "CALL", "status": "COMPLETE", "content_preview": "make_sound", "color": "#E67E22", "metadata": {"lineno": 50, "col_offset": 25, "args_count": 0}}, {"id": "call_groom", "type": "CALL", "status": "COMPLETE", "content_preview": "groom", "color": "#E67E22", "metadata": {"lineno": 51, "col_offset": 25, "args_count": 0}}, {"id": "call_fetch", "type": "CALL", "status": "COMPLETE", "content_preview": "fetch", "color": "#E67E22", "metadata": {"lineno": 52, "col_offset": 25, "args_count": 0}}, {"id": "call_super", "type": "CALL", "status": "COMPLETE", "content_preview": "super", "color": "#E67E22", "metadata": {"lineno": 23, "col_offset": 8, "args_count": 0}}], "links": [{"source": "code_7925198775797671324", "target": "phantom_import_unittest", "type": "DEPENDS_ON", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "class_Animal", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "class_Mammal", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "class_Dog", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "class_TestAnimalInheritance", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function___init__", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_make_sound", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_groom", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_fetch", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_test_base_animal", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_test_mammal_inheritance", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "function_test_dog_inheritance", "type": "CONTAINS", "color": "#2ECC71", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_main", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call___init__", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_Animal", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_assertEqual", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_Mammal", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_Dog", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_make_sound", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_groom", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_fetch", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}, {"source": "code_7925198775797671324", "target": "call_super", "type": "REFERENCES", "color": "#E74C3C", "signed_by": null, "created_at": null}]};

        const width = window.innerWidth;
        const height = window.innerHeight;

        const svg = d3.select("#graph")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const simulation = d3.forceSimulation(data.nodes)
            .force("link", d3.forceLink(data.links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-300))
            .force("center", d3.forceCenter(width / 2, height / 2));

        const link = svg.append("g")
            .selectAll("line")
            .data(data.links)
            .join("line")
            .attr("class", "link")
            .attr("stroke", d => d.color)
            .attr("stroke-width", 2);

        const node = svg.append("g")
            .selectAll("g")
            .data(data.nodes)
            .join("g")
            .attr("class", "node")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("circle")
            .attr("r", 20)
            .attr("fill", d => d.color);

        node.append("text")
            .attr("dy", 4)
            .attr("text-anchor", "middle")
            .text(d => d.type);

        node.append("title")
            .text(d => d.id + "\n" + d.content_preview);

        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        function dragstarted(event) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            event.subject.fx = event.subject.x;
            event.subject.fy = event.subject.y;
        }

        function dragged(event) {
            event.subject.fx = event.x;
            event.subject.fy = event.y;
        }

        function dragended(event) {
            if (!event.active) simulation.alphaTarget(0);
            event.subject.fx = null;
            event.subject.fy = null;
        }
    </script>
</body>
</html>